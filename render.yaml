# render.yaml
services:
  - type: web
    name: kyber-vpn-backend
    env: python

    # ──── Environment Vars ────────────────────────
    envVars:
      # Pin Python 3.9.x (Render will install it)
      - key: PYTHON_VERSION
        value: "3.9.0"
      # Skip Poetry entirely
      - key: POETRY_VERSION
        value: ""

    # ──── Build ───────────────────────────────────
    # These commands run in the system Python
    buildCommand: |
      python3 -m pip install --upgrade pip setuptools wheel
      python3 -m pip install -r requirements.txt

    # ──── Startup ─────────────────────────────────
    startCommand: gunicorn app.main:app -k uvicorn.workers.UvicornWorker
